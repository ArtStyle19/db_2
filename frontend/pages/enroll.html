
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscripción en Cursos</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
  <body class="d-flex flex-column min-vh-100">
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="../index.html">
          <img src="../assets/logos/logo_UNA.png" alt="University Logo" height="90">
            Universidad Nacional del Altiplano
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#">Inicio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./enroll.html">Inscripcion</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./chat.html">Chat</a>
            </li>
            <li class="nav-item">

              <div class="nav-item" id="session-container">
                <div class="row">
                  <div class="col-md-12">

                    <!-- Session content will be loaded here dynamically -->
                  </div>
                </div>
              </div>
            </li>

            <!-- <li class="nav-item"> -->
            <!--   <a class=" btn btn-primary" id="loginDropdown" href="./pages/login.html">Login/Register</a> -->
            <!-- </li> -->
          </ul>
        </div>


      </nav>

    </header>



    <h1>Inscripción en Cursos</h1>

    <div id="courseSelection">
        <label for="course">Cursos Disponibles:</label>
        <select name="course" id="course"></select>
        <button onclick="enroll()">Inscribirse</button>
    </div>


    <footer class="footer mt-auto py-3 bg-light">
      <div class="container text-center">
        <span class="text-muted">© Universidad Nacional del Altiplano</span>
      </div>
    </footer>

    <script>
        // Función para cargar dinámicamente los cursos
        function loadCourses() {
            $.ajax({
                url: '/db_2/backend/get_courses.php', // Ruta al script PHP que obtiene los cursos
                type: 'GET',
                dataType: 'json',
                success: function(data) {
                    // Llenar el select con la lista de cursos
                    var select = $('#course');
                    $.each(data, function(index, course) {
                        select.append($('<option>', {
                            value: course.id,
                            text: course.name
                        }));
                    });
                }
            });
        }

        // Función para realizar la inscripción
        function enroll() {
            var selectedCourse = $('#course').val();

            if (selectedCourse) {
                // Realizar la inscripción
                $.ajax({
                    url: '/db_2/backend/enroll.php', // Ruta al script PHP que maneja la inscripción
                    type: 'POST',
                    data: { enroll: true, courses: [selectedCourse] },
                    success: function(response) {
                        alert(response);
                        // Puedes redirigir al estudiante al chat o a la página principal después de la inscripción.
                        // window.location.href = '/chat.html?course=' + selectedCourse;
                    }
                });
            } else {
                alert('Por favor, selecciona un curso antes de inscribirte.');
            }
        }

        // Cargar cursos al cargar la página
        $(document).ready(function() {
            loadCourses();
        });
    </script>

</body>
</html>
